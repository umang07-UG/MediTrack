{% extends "dheader.html" %}
{% block content %}

<br>
<br>
<br>
<br>
<div class="container mt-5">
  <h2>Welcome, Dr. {{ doctor.name }}</h2>
  <hr>

  <h3>Your Appointments</h3>
  {% if appointments %}
    <table class="table table-bordered">
  <thead>
    <tr>
      <th>Patient Name</th>
      <th>Email</th>
      <th>Phone</th>
      <th>Department</th>
      <th>Date</th>
      <th>Message</th>
      <th>Status</th>
      <th>Action</th>
      <th>For Delete</th>
    </tr>
  </thead>
  <tbody>
    {% for a in appointments %}
    <tr>
      <td>{{ a.pname }}</td>
      <td>{{ a.pemail }}</td>
      <td>{{ a.pphone }}</td>
      <td>{{ a.department }}</td>
      <td>{{ a.date }}</td>
      <td>{{ a.message }}</td>
      <td>{{ a.status|capfirst }}</td>
      
      <!-- <td>
        {% if a.status == "pending" %}
          <a href="{% url 'update_appointment' a.id 'approve' %}" class="btn btn-success btn-sm">Approve</a>
          <a href="{% url 'update_appointment' a.id 'reject' %}" class="btn btn-danger btn-sm">Reject</a>
        {% endif %}
      </td> -->

      <td>
          <!-- Approve / Reject buttons -->
          {% if a.status == "pending" %}
            <a href="{% url 'update_appointment' a.id 'approve' %}" class="btn btn-success btn-sm">Approve</a>
            <a href="{% url 'update_appointment' a.id 'reject' %}" class="btn btn-danger btn-sm">Reject</a>
          {% else %}
            <span class="badge bg-info">{{ a.status|capfirst }}</span>
          {% endif %}
      </td>

      <td>
          <a href="{% url 'delete_appointment' a.id %}" class="btn btn-warning btn-sm"
            onclick="return confirm('Are you sure you want to delete this appointment?');">Delete</a>
      </td>

    </tr>
    {% endfor %}
  </tbody>
</table>

  {% else %}
    <p>No appointments yet.</p>
  {% endif %}
</div>
<br>
<br>
<br>
<br>
<br>


{% endblock %}
